<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>DOCKERåŸºç¡€æŠ€æœ¯ï¼šAUFS(è½¬) - SoulChildéšç¬”è®°</title><meta name=author content="SoulChild"><meta name=author-link content="https://www.soulchild.cn"><meta name=description content="å°ç‰›ä¹‹è·¯ï¼Œä¸€ä¸ªè®°å½•è¿ç»´å¼€å‘ã€è‡ªåŠ¨åŒ–è¿ç»´ã€DevOpsã€Kubernetesã€Dockerã€ç¼–ç¨‹ç­‰æŠ€æœ¯ç¬”è®°çš„åšå®¢ï¼Œä¸æ‚¨åˆ†äº«å®ç”¨æŠ€å·§å’Œå¿ƒå¾—"><meta name=keywords content="docker"><meta itemprop=name content="DOCKERåŸºç¡€æŠ€æœ¯ï¼šAUFS(è½¬)"><meta itemprop=description content><meta itemprop=datePublished content="2021-05-31T14:50:23+08:00"><meta itemprop=dateModified content="2021-05-31T15:30:33+08:00"><meta itemprop=wordCount content="462"><meta itemprop=image content="https://www.soulchild.cn/logo.png"><meta itemprop=keywords content="docker,"><meta property="og:title" content="DOCKERåŸºç¡€æŠ€æœ¯ï¼šAUFS(è½¬)"><meta property="og:description" content><meta property="og:type" content="article"><meta property="og:url" content="https://www.soulchild.cn/post/2418/"><meta property="og:image" content="https://www.soulchild.cn/logo.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-05-31T14:50:23+08:00"><meta property="article:modified_time" content="2021-05-31T15:30:33+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.soulchild.cn/logo.png"><meta name=twitter:title content="DOCKERåŸºç¡€æŠ€æœ¯ï¼šAUFS(è½¬)"><meta name=twitter:description content><meta name=application-name content="SoulChildéšç¬”è®°"><meta name=apple-mobile-web-app-title content="SoulChildéšç¬”è®°"><meta name=theme-color data-light=#f8f8f8 data-dark=#252627 content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://www.soulchild.cn/post/2418/><link rel=prev href=https://www.soulchild.cn/post/2415/><link rel=next href=https://www.soulchild.cn/post/2430/><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"DOCKERåŸºç¡€æŠ€æœ¯ï¼šAUFS(è½¬)","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/www.soulchild.cn\/post\/2418\/"},"genre":"posts","keywords":"docker","wordcount":462,"url":"https:\/\/www.soulchild.cn\/post\/2418\/","datePublished":"2021-05-31T14:50:23+08:00","dateModified":"2021-05-31T15:30:33+08:00","publisher":{"@type":"Organization","name":"SoulChild"},"author":{"@type":"Person","name":"SoulChild"},"description":""}</script></head><body data-header-desktop=sticky data-header-mobile=auto><script>(window.localStorage?.getItem("theme")?localStorage.getItem("theme")==="dark":"dark"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"dark"==="dark")&&document.body.setAttribute("data-theme","dark")</script><div class=wrapper><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=SoulChildéšç¬”è®°><span class=header-title-pre><i class='fa-brands fa-docker'></i></span><span class=header-title-text>SoulChildéšç¬”è®°</span></a><span id=typeit-header-subtitle-desktop class="typeit header-subtitle"></span></div><nav><ul class=menu><li class="menu-item text-start"><a class=menu-link href=/posts/ title=æ‰€æœ‰æ–‡ç« ><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> æ‰€æœ‰æ–‡ç« </a></li><li class="menu-item text-start"><a class=menu-link href=/tags/ title=æ ‡ç­¾><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> æ ‡ç­¾</a></li><li class="menu-item text-start has-children"><a class=menu-link href=/categories/ title=åˆ†ç±»><i class="fa-fw fas fa-folder-open fa-fw fa-sm" aria-hidden=true></i> åˆ†ç±»</a><i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden=true></i><ul class=sub-menu><li class="menu-item text-start"><a class=menu-link href=/categories/kubernetes title=Kubernetes><i class="fa-solid fa-dharmachakra fa-fw fa-sm" aria-hidden=true></i> Kubernetes</a></li><li class="menu-item text-start"><a class=menu-link href=/categories/python title=Python><i class="fa-brands fa-python fa-fw fa-sm" aria-hidden=true></i> Python</a></li><li class="menu-item text-start"><a class=menu-link href=/categories/golang title=Golang><i class="fa-brands fa-golang fa-fw fa-sm" aria-hidden=true></i> Golang</a></li></ul></li><li class="menu-item text-start"><a class=menu-link href=/friends/ title=å‹é“¾><i class="fa-solid fa-users fa-fw fa-sm fa-fw fa-sm" aria-hidden=true></i> å‹é“¾</a></li><li class="menu-item text-start"><a class=menu-link href=https://www.travellings.cn title=å¼€å¾€ rel="noopener noreferrer" target=_blank><i class="fa-solid fa-train-subway fa-sm fa-fw fa-sm" aria-hidden=true></i> å¼€å¾€</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id=search-desktop><input type=text placeholder="$grep " id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=æœç´¢><i class="fa-solid fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=æ¸…ç©º><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></li><li class="menu-item theme-switch" title=åˆ‡æ¢ä¸»é¢˜><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=SoulChildéšç¬”è®°><span class=header-title-pre><i class='fa-brands fa-docker'></i></span><span class=header-title-text>SoulChildéšç¬”è®°</span></a><span id=typeit-header-subtitle-mobile class="typeit header-subtitle"></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="$grep " id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=æœç´¢><i class="fa-solid fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=æ¸…ç©º><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>å–æ¶ˆ</a></li><li class="menu-item text-start"><a class=menu-link href=/posts/ title=æ‰€æœ‰æ–‡ç« ><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> æ‰€æœ‰æ–‡ç« </a></li><li class="menu-item text-start"><a class=menu-link href=/tags/ title=æ ‡ç­¾><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> æ ‡ç­¾</a></li><li class="menu-item text-start"><span class=nested-item><a class=menu-link href=/categories/ title=åˆ†ç±»><i class="fa-fw fas fa-folder-open fa-fw fa-sm" aria-hidden=true></i> åˆ†ç±»</a>
<i class="dropdown-icon fa-solid fa-chevron-right" aria-hidden=true></i></span><ul class=sub-menu><li class="menu-item text-start"><a class=menu-link href=/categories/kubernetes title=Kubernetes><i class="fa-solid fa-dharmachakra fa-fw fa-sm" aria-hidden=true></i> Kubernetes</a></li><li class="menu-item text-start"><a class=menu-link href=/categories/python title=Python><i class="fa-brands fa-python fa-fw fa-sm" aria-hidden=true></i> Python</a></li><li class="menu-item text-start"><a class=menu-link href=/categories/golang title=Golang><i class="fa-brands fa-golang fa-fw fa-sm" aria-hidden=true></i> Golang</a></li></ul></li><li class="menu-item text-start"><a class=menu-link href=/friends/ title=å‹é“¾><i class="fa-solid fa-users fa-fw fa-sm fa-fw fa-sm" aria-hidden=true></i> å‹é“¾</a></li><li class="menu-item text-start"><a class=menu-link href=https://www.travellings.cn title=å¼€å¾€ rel="noopener noreferrer" target=_blank><i class="fa-solid fa-train-subway fa-sm fa-fw fa-sm" aria-hidden=true></i> å¼€å¾€</a></li><li class="menu-item theme-switch" title=åˆ‡æ¢ä¸»é¢˜><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=container data-page-style=normal><aside class=toc id=toc-auto><h2 class=toc-title>ç›®å½•&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden=true></i></h2><div class="toc-content always-active" id=toc-content-auto></div></aside><aside class=aside-custom><div class=fun-aside-panel><h4 class=fun-title>ä¼‘æ¯ä¸€ä¸‹</h4><div class=fun-section id=stickman-section><div class=stickman-container><svg id="stickman" width="80" height="120" viewBox="0 0 80 120" xmlns="http://www.w3.org/2000/svg"><circle class="head" cx="40" cy="25" r="15" stroke="#fff" stroke-width="2" fill="transparent"/><line class="body" x1="40" y1="40" x2="40" y2="75" stroke="#fff" stroke-width="2"/><line class="arm left-arm" x1="40" y1="50" x2="20" y2="60" stroke="#fff" stroke-width="2"/><line class="arm right-arm" x1="40" y1="50" x2="60" y2="60" stroke="#fff" stroke-width="2"/><line class="leg left-leg" x1="40" y1="75" x2="25" y2="110" stroke="#fff" stroke-width="2"/><line class="leg right-leg" x1="40" y1="75" x2="55" y2="110" stroke="#fff" stroke-width="2"/></svg></div></div><div class=fun-section id=drawing-section><h5 class=fun-header>ç®€æ˜“ç”»æ¿</h5><canvas id=drawing-canvas width=200 height=150></canvas><div class=drawing-controls><div class=color-buttons><button class=color-btn style=background-color:#000 onclick='setDrawColor("#000000")'></button>
<button class=color-btn style=background-color:red onclick='setDrawColor("#ff0000")'></button>
<button class=color-btn style=background-color:#0c0 onclick='setDrawColor("#00cc00")'></button>
<button class=color-btn style=background-color:#06f onclick='setDrawColor("#0066ff")'></button></div><button onclick=clearCanvas()>æ¸…é™¤</button></div></div><div class=fun-section id=weather-widget><h5 class=fun-header>ä»Šæ—¥å¿ƒæƒ…</h5><div class=mood-container><div class=mood-emoji id=current-mood>ğŸ˜Š</div><div class=mood-selector><button onclick='changeMood("ğŸ˜Š")'>ğŸ˜Š</button>
<button onclick='changeMood("ğŸ˜‚")'>ğŸ˜‚</button>
<button onclick='changeMood("ğŸ˜")'>ğŸ˜</button>
<button onclick='changeMood("ğŸ˜´")'>ğŸ˜´</button>
<button onclick='changeMood("ğŸ¤”")'>ğŸ¤”</button>
<button onclick='changeMood("ğŸ˜")'>ğŸ˜</button></div></div></div><div class=fun-section id=quote-section><h5 class=fun-header>æ¯æ—¥ä¸€è¨€</h5><div class=quote-container><p id=random-quote>çŸ¥è¯†å°±æ˜¯åŠ›é‡ã€‚</p><button onclick=getRandomQuote()>æ¢ä¸€æ¡</button></div></div></div><style>.fun-aside-panel{background:#f9f9f9;border-radius:12px;padding:15px;margin-bottom:20px;box-shadow:0 2px 10px rgba(0,0,0,5%);font-family:-apple-system,BlinkMacSystemFont,segoe ui,Roboto,helvetica neue,Arial,sans-serif}.fun-title{margin-top:0;margin-bottom:15px;padding-bottom:10px;border-bottom:1px solid #e0e0e0;color:#333;font-size:1.2em;text-align:center}.fun-section{margin-bottom:18px;background:#333;border-radius:10px;padding:12px;box-shadow:0 1px 3px rgba(0,0,0,.1)}.fun-header{margin-top:0;margin-bottom:10px;color:#eee;font-size:1em;text-align:center}.stickman-container{height:140px;display:flex;justify-content:center;align-items:center;position:relative;perspective:600px;overflow:hidden}#stickman{cursor:pointer;transform-origin:center bottom;transition:transform .3s ease-in-out;position:relative;left:0}@keyframes jump{0%,100%{transform:translateY(0)}50%{transform:translateY(-20px)}}@keyframes flip{0%{transform:rotateX(0)}50%{transform:rotateX(180deg)}100%{transform:rotateX(360deg)}}@keyframes spin{0%{transform:rotateY(0)}100%{transform:rotateY(360deg)}}@keyframes kungfu1{0%,100%{transform:rotate(0)}25%{transform:rotate(-15deg)translateY(-5px)}50%{transform:rotate(0)}75%{transform:rotate(15deg)translateY(-5px)}}@keyframes kungfu2{0%{transform:rotate(0)}30%{transform:rotate(30deg)}60%{transform:rotate(-30deg)}100%{transform:rotate(0)}}@keyframes punch{0%,100%{transform:translateX(0)}20%{transform:translateX(-10px)rotate(-10deg)}50%{transform:translateX(15px)rotate(10deg)}80%{transform:translateX(-5px)rotate(-5deg)}}@keyframes leftArmMove{0%,100%{transform:rotate(0)}30%{transform:rotate(-30deg)}60%{transform:rotate(20deg)}}@keyframes rightArmMove{0%,100%{transform:rotate(0)}30%{transform:rotate(30deg)}60%{transform:rotate(-20deg)}}@keyframes leftLegMove{0%,100%{transform:rotate(0)}25%{transform:rotate(-20deg)}50%{transform:rotate(0)}75%{transform:rotate(15deg)}}@keyframes rightLegMove{0%,100%{transform:rotate(0)}25%{transform:rotate(20deg)}50%{transform:rotate(0)}75%{transform:rotate(-15deg)}}@keyframes walkLegs{0%,100%{transform:rotate(0)}25%{transform:rotate(-25deg)}75%{transform:rotate(25deg)}}@keyframes walkLegsReverse{0%,100%{transform:rotate(0)}25%{transform:rotate(25deg)}75%{transform:rotate(-25deg)}}@keyframes walkArms{0%,100%{transform:rotate(0)}25%{transform:rotate(20deg)}75%{transform:rotate(-20deg)}}@keyframes walkArmsReverse{0%,100%{transform:rotate(0)}25%{transform:rotate(-20deg)}75%{transform:rotate(20deg)}}@keyframes bodyBobbing{0%,50%,100%{transform:translateY(0)}25%,75%{transform:translateY(-2px)}}.jumping{animation:jump .5s ease-in-out}.flipping{animation:flip .8s ease-in-out}.spinning{animation:spin .8s ease-in-out}.kungfu1{animation:kungfu1 .7s ease-in-out}.kungfu2 .left-arm{transform-origin:40px 50px;animation:kungfu2 .4s ease-in-out}.kungfu2 .right-arm{transform-origin:40px 50px;animation:kungfu2 .4s ease-in-out .2s}.punching{animation:punch .5s ease-in-out}.moving-limbs .left-arm{transform-origin:40px 50px;animation:leftArmMove 1.2s ease-in-out infinite}.moving-limbs .right-arm{transform-origin:40px 50px;animation:rightArmMove 1.2s ease-in-out infinite}.moving-limbs .left-leg{transform-origin:40px 75px;animation:leftLegMove 1.2s ease-in-out infinite}.moving-limbs .right-leg{transform-origin:40px 75px;animation:rightLegMove 1.2s ease-in-out infinite}.walking .body{animation:bodyBobbing .5s ease-in-out infinite}.walking .left-arm{transform-origin:40px 50px;animation:walkArms .5s ease-in-out infinite}.walking .right-arm{transform-origin:40px 50px;animation:walkArmsReverse .5s ease-in-out infinite}.walking .left-leg{transform-origin:40px 75px;animation:walkLegs .5s ease-in-out infinite}.walking .right-leg{transform-origin:40px 75px;animation:walkLegsReverse .5s ease-in-out infinite}.waving .right-arm{transform-origin:40px 50px;animation:armWave .8s ease-in-out infinite}.kicking .left-leg{transform-origin:40px 75px;animation:legKick .8s ease-in-out}#drawing-canvas{background:#fff;border:1px solid #ddd;border-radius:8px;margin:0 auto;display:block;touch-action:none}.drawing-controls{display:flex;flex-direction:column;gap:8px;margin-top:10px}.color-buttons{display:flex;justify-content:center;gap:5px;margin-bottom:5px}.color-btn{width:20px;height:20px;border:1px solid #ccc;border-radius:50%;cursor:pointer}.drawing-controls button{background:#f0f0f0;border:1px solid #ddd;border-radius:20px;padding:5px 10px;font-size:.85em;cursor:pointer}.mood-container{text-align:center}.mood-emoji{font-size:3em;margin:10px 0;transition:transform .3s}.mood-selector{display:flex;justify-content:center;gap:5px;flex-wrap:wrap}.mood-selector button{background:0 0;border:none;font-size:1.5em;cursor:pointer;transition:transform .2s}.mood-selector button:hover{transform:scale(1.2)}.quote-container{text-align:center}#random-quote{font-style:italic;color:#eee;margin-bottom:10px;min-height:40px}.quote-container button{background:#f0f0f0;border:1px solid #ddd;border-radius:20px;padding:5px 10px;font-size:.85em;cursor:pointer}[data-theme=dark] .fun-aside-panel{background:#2a2a2a;box-shadow:0 2px 10px rgba(0,0,0,.2)}[data-theme=dark] .fun-title{color:#eee;border-bottom-color:#444}[data-theme=dark] .fun-section{background:#222;box-shadow:0 1px 3px rgba(0,0,0,.3)}[data-theme=dark] .drawing-controls button,[data-theme=dark] .quote-container button{background:#444;border-color:#555;color:#eee}[data-theme=dark] .drawing-controls button:hover,[data-theme=dark] .quote-container button:hover{background:#555}[data-theme=dark] #drawing-canvas{background:#444;border-color:#555}</style><script>document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("stickman"),e=document.querySelector(".stickman-container");if(t&&e){const o=["jump","flip","spin","kungfu1","kungfu2","punch","limbs","wave","kick","walk"];let i="";function n(){let a;do a=o[Math.floor(Math.random()*o.length)];while(a===i)switch(i=a,e.classList.remove("jumping","flipping","spinning","kungfu1","kungfu2","punching","moving-limbs","waving","kicking","walking"),t.style.left="0",void e.offsetWidth,a){case"jump":e.classList.add("jumping");break;case"flip":e.classList.add("flipping");break;case"spin":e.classList.add("spinning");break;case"kungfu1":e.classList.add("kungfu1");break;case"kungfu2":e.classList.add("kungfu2");break;case"punch":e.classList.add("punching");break;case"limbs":e.classList.add("moving-limbs");break;case"wave":e.classList.add("waving");break;case"kick":e.classList.add("kicking");break;case"walk":e.classList.add("walking"),s();break}let r=1e3;a==="limbs"?r=3e3:a==="walk"&&(r=4e3);const c=Math.floor(Math.random()*300)+200;setTimeout(function(){e.style.transition="opacity 0.2s ease-in-out",e.style.opacity="0.8",setTimeout(function(){e.style.opacity="1",n()},200)},r-c)}function s(){const n=Math.random()>.5?1:-1;n===-1?t.style.transform="scaleX(-1)":t.style.transform="scaleX(1)";const r=e.offsetWidth,c=t.getBoundingClientRect().width,s=r/2-c/2,o=4e3,l=performance.now(),i=parseInt(t.style.left||"0");function a(e){const r=e-l;if(r<o){const e=i+n*s*r/o;t.style.left=e+"px",requestAnimationFrame(a)}else t.style.left=i+n*s+"px"}requestAnimationFrame(a)}n(),t.addEventListener("click",function(){const n=o[Math.floor(Math.random()*o.length)];switch(e.classList.remove("jumping","flipping","spinning","kungfu1","kungfu2","punching","moving-limbs","waving","kicking","walking"),t.style.left="0",void e.offsetWidth,n){case"jump":e.classList.add("jumping");break;case"flip":e.classList.add("flipping");break;case"spin":e.classList.add("spinning");break;case"kungfu1":e.classList.add("kungfu1");break;case"kungfu2":e.classList.add("kungfu2");break;case"punch":e.classList.add("punching");break;case"limbs":e.classList.add("moving-limbs");break;case"wave":e.classList.add("waving");break;case"kick":e.classList.add("kicking");break;case"walk":e.classList.add("walking"),s();break}})}initDrawingCanvas(),getRandomQuote()});let isDrawing=!1,drawColor="#000000",ctx;function initDrawingCanvas(){const e=document.getElementById("drawing-canvas");if(!e)return;ctx=e.getContext("2d"),e.addEventListener("mousedown",startDrawing),e.addEventListener("mousemove",draw),e.addEventListener("mouseup",stopDrawing),e.addEventListener("mouseout",stopDrawing),e.addEventListener("touchstart",function(e){e.preventDefault(),startDrawingTouch(e)}),e.addEventListener("touchmove",function(e){e.preventDefault(),drawTouch(e)}),e.addEventListener("touchend",stopDrawing)}function startDrawing(e){isDrawing=!0,draw(e)}function startDrawingTouch(e){isDrawing=!0,drawTouch(e)}function draw(e){if(!isDrawing)return;const t=e.target.getBoundingClientRect(),n=e.clientX-t.left,s=e.clientY-t.top;ctx.lineWidth=3,ctx.lineCap="round",ctx.strokeStyle=drawColor,ctx.lineTo(n,s),ctx.stroke(),ctx.beginPath(),ctx.moveTo(n,s)}function drawTouch(e){if(!isDrawing)return;const t=e.target.getBoundingClientRect(),n=e.touches[0],s=n.clientX-t.left,o=n.clientY-t.top;ctx.lineWidth=3,ctx.lineCap="round",ctx.strokeStyle=drawColor,ctx.lineTo(s,o),ctx.stroke(),ctx.beginPath(),ctx.moveTo(s,o)}function stopDrawing(){isDrawing=!1,ctx.beginPath()}function setDrawColor(e){drawColor=e}function clearCanvas(){const e=document.getElementById("drawing-canvas");e&&ctx&&ctx.clearRect(0,0,e.width,e.height)}function changeMood(e){const t=document.getElementById("current-mood");t.textContent=e,t.style.transform="scale(1.2)",setTimeout(()=>{t.style.transform="scale(1)"},200)}const quotes=["å­¦ä¹ æ˜¯ä¸€ç§æ€åº¦ï¼Œä¹Ÿæ˜¯ä¸€ç§ä¹ æƒ¯ã€‚","çœŸæ­£çš„çŸ¥è¯†æ˜¯ä»å®è·µä¸­è·å¾—çš„ã€‚","è¯»ä¹¦ç ´ä¸‡å·ï¼Œä¸‹ç¬”å¦‚æœ‰ç¥ã€‚","å¥½å¥‡å¿ƒæ˜¯æœ€å¥½çš„è€å¸ˆã€‚","ç§‘æŠ€å°±æ˜¯åŠ›é‡ã€‚","äººç”Ÿå°±åƒä»£ç ï¼Œçœ‹èµ·æ¥å¾ˆç®€å•ï¼Œå†™èµ·æ¥å¾ˆéš¾ã€‚","ä¸ç§¯è·¬æ­¥ï¼Œæ— ä»¥è‡³åƒé‡Œï¼›ä¸ç§¯å°æµï¼Œæ— ä»¥æˆæ±Ÿæµ·ã€‚","çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œã€‚","ä¸šç²¾äºå‹¤ï¼Œè’äºå¬‰ï¼›è¡Œæˆäºæ€ï¼Œæ¯äºéšã€‚","æ¯ä¸€æ¬¡å¤±è´¥éƒ½æ˜¯è¿ˆå‘æˆåŠŸçš„ä¸€æ­¥ã€‚"];function getRandomQuote(){const e=document.getElementById("random-quote"),t=Math.floor(Math.random()*quotes.length);e.textContent=quotes[t],e.style.opacity=0,setTimeout(()=>{e.style.opacity=1},200)}</script></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>DOCKERåŸºç¡€æŠ€æœ¯ï¼šAUFS(è½¬)</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://www.soulchild.cn title=ä½œè€… target=_blank rel="external nofollow noopener noreferrer author" class=author><img class="lazyload avatar" src=/svg/loading.min.svg data-src=/images/avatar.png data-srcset="/images/avatar.png, /images/avatar.png 1.5x, /images/avatar.png 2x" data-sizes=auto alt=SoulChild title=SoulChild>&nbsp;SoulChild</a></span>
<span class=post-category>æ”¶å½•äº <a href=/categories/%E5%85%B6%E4%BB%96/><i class="fa-regular fa-folder fa-fw" aria-hidden=true></i> å…¶ä»–</a></span></div><div class=post-meta-line><span title="2021-05-31 14:50:23"><i class="fa-regular fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime="2021-05-31 14:50">2021-05-31 14:50</time></span>&nbsp;<span><i class="fa-solid fa-pencil-alt fa-fw" aria-hidden=true></i> çº¦ 462 å­—</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw" aria-hidden=true></i> é¢„è®¡é˜…è¯» 3 åˆ†é’Ÿ</span>&nbsp;<span id=busuanzi_container_page_pv class="busuanzi_visitors comment-visitors" data-flag-title=DOCKERåŸºç¡€æŠ€æœ¯ï¼šAUFS(è½¬)>
<i class="fa-regular fa-eye fa-fw" aria-hidden=true></i>&nbsp;<span id=busuanzi_value_page_pv>-</span>&nbsp;æ¬¡é˜…è¯»
</span>&nbsp;</div></div><div class="details toc" id=toc-static data-kept=false><div class="details-summary toc-title"><span>ç›®å½•</span>
<span><i class="details-icon fa-solid fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#aufsçš„ä¸€äº›ç‰¹æ€§>AUFSçš„ä¸€äº›ç‰¹æ€§</a></li><li><a href=#ç›¸å…³æœ¯è¯­>ç›¸å…³æœ¯è¯­</a></li><li><a href=#ç›¸å…³é—®é¢˜>ç›¸å…³é—®é¢˜</a><ul><li><a href=#å…¶ä¸€ä½ å¯èƒ½ä¼šé—®è¦æœ‰æ–‡ä»¶åœ¨åŸæ¥çš„åœ°æ–¹è¢«ä¿®æ”¹äº†ä¼šæ€ä¹ˆæ ·mountçš„ç›®å½•ä¼šä¸€èµ·æ”¹å˜å—ç­”æ¡ˆæ˜¯ä¼šçš„ä¹Ÿå¯ä»¥æ˜¯ä¸ä¼šçš„å› ä¸ºä½ å¯ä»¥æŒ‡å®šä¸€ä¸ªå«udbaçš„å‚æ•°å…¨ç§°users-direct-branch-accessè¿™ä¸ªå‚æ•°æœ‰ä¸‰ä¸ªå–å€¼>å…¶ä¸€ã€ä½ å¯èƒ½ä¼šé—®ï¼Œè¦æœ‰æ–‡ä»¶åœ¨åŸæ¥çš„åœ°æ–¹è¢«ä¿®æ”¹äº†ä¼šæ€ä¹ˆæ ·ï¼Ÿmountçš„ç›®å½•ä¼šä¸€èµ·æ”¹å˜å—ï¼Ÿç­”æ¡ˆæ˜¯ä¼šçš„ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸ä¼šçš„ã€‚å› ä¸ºä½ å¯ä»¥æŒ‡å®šä¸€ä¸ªå«udbaçš„å‚æ•°ï¼ˆå…¨ç§°ï¼šUserâ€™s Direct Branch Accessï¼‰ï¼Œè¿™ä¸ªå‚æ•°æœ‰ä¸‰ä¸ªå–å€¼ï¼š</a></li><li><a href=#å…¶äºŒå¦‚æœæœ‰å¤šä¸ªrwçš„branchç›®å½•è¢«unionèµ·æ¥äº†é‚£ä¹ˆå½“æˆ‘åˆ›å»ºæ–‡ä»¶çš„æ—¶å€™aufsä¼šåˆ›å»ºåœ¨å“ªé‡Œå‘¢-aufsæä¾›äº†ä¸€ä¸ªå«createçš„å‚æ•°å¯ä»¥ä¾›ä½ æ¥é…ç½®ç›¸å½“çš„åˆ›å»ºç­–ç•¥ä¸‹é¢æœ‰å‡ ä¸ªä¾‹å­>å…¶äºŒã€å¦‚æœæœ‰å¤šä¸ªrwçš„branchï¼ˆç›®å½•ï¼‰è¢«unionèµ·æ¥äº†ï¼Œé‚£ä¹ˆï¼Œå½“æˆ‘åˆ›å»ºæ–‡ä»¶çš„æ—¶å€™ï¼Œaufsä¼šåˆ›å»ºåœ¨å“ªé‡Œå‘¢ï¼Ÿ aufsæä¾›äº†ä¸€ä¸ªå«createçš„å‚æ•°å¯ä»¥ä¾›ä½ æ¥é…ç½®ç›¸å½“çš„åˆ›å»ºç­–ç•¥ï¼Œä¸‹é¢æœ‰å‡ ä¸ªä¾‹å­ã€‚</a></li></ul></li><li><a href=#aufsçš„æ€§èƒ½>AUFSçš„æ€§èƒ½</a></li></ul></nav></div></div><div class=content id=content data-end-flag=---><div class="details admonition warning open"><div class="details-summary admonition-title"><i class="icon fa-solid fa-exclamation-triangle fa-fw" aria-hidden=true></i>è­¦å‘Š<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>æœ¬æ–‡æœ€åæ›´æ–°äº 2021-05-31 15:30ï¼Œæ–‡ä¸­å†…å®¹å¯èƒ½å·²è¿‡æ—¶ã€‚</div></div></div><h1 id=åŸæ–‡åœ°å€-httpscoolshellcnarticles17061html>åŸæ–‡åœ°å€: <a href=https://coolshell.cn/articles/17061.html target=_blank rel="external nofollow noopener noreferrer">https://coolshell.cn/articles/17061.html<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a></h1><p><figure><a class=lightgallery href=/post/2418/images/210893056.png data-thumbnail=/post/2418/images/210893056.png data-sub-html="<h2>15937-eubb2wdk1d.png</h2><p>210893056</p>"><img class=lazyload src=/svg/loading.min.svg data-src=/post/2418/images/210893056.png data-srcset="/post/2418/images/210893056.png, /post/2418/images/210893056.png 1.5x, /post/2418/images/210893056.png 2x" data-sizes=auto alt=15937-eubb2wdk1d.png title=210893056 width=300 height=225></a><figcaption class=image-caption>15937-eubb2wdk1d.png</figcaption></figure></p><p>AUFSæ˜¯ä¸€ç§Union File Systemï¼Œæ‰€è°“UnionFSå°±æ˜¯æŠŠä¸åŒç‰©ç†ä½ç½®çš„ç›®å½•åˆå¹¶mountåˆ°åŒä¸€ä¸ªç›®å½•ä¸­ã€‚UnionFSçš„ä¸€ä¸ªæœ€ä¸»è¦çš„åº”ç”¨æ˜¯ï¼ŒæŠŠä¸€å¼ CD/DVDå’Œä¸€ä¸ªç¡¬ç›˜ç›®å½•ç»™è”åˆ mountåœ¨ä¸€èµ·ï¼Œç„¶åï¼Œä½ å°±å¯ä»¥å¯¹è¿™ä¸ªåªè¯»çš„CD/DVDä¸Šçš„æ–‡ä»¶è¿›è¡Œä¿®æ”¹ï¼ˆå½“ç„¶ï¼Œä¿®æ”¹çš„æ–‡ä»¶å­˜äºç¡¬ç›˜ä¸Šçš„ç›®å½•é‡Œï¼‰ã€‚</p><p>AUFSåˆå«Another UnionFSï¼Œåæ¥å«Alternative UnionFSï¼Œåæ¥å¯èƒ½è§‰å¾—ä¸å¤Ÿéœ¸æ°”ï¼Œå«æˆAdvance UnionFSã€‚æ˜¯ä¸ªå«Junjiro Okajimaï¼ˆå²¡å³¶é †æ²»éƒï¼‰åœ¨2006å¹´å¼€å‘çš„ï¼ŒAUFSå®Œå…¨é‡å†™äº†æ—©æœŸçš„UnionFS 1.xï¼Œå…¶ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†å¯é æ€§å’Œæ€§èƒ½ï¼Œå¹¶ä¸”å¼•å…¥äº†ä¸€äº›æ–°çš„åŠŸèƒ½ï¼Œæ¯”å¦‚å¯å†™åˆ†æ”¯çš„è´Ÿè½½å‡è¡¡ã€‚AUFSåœ¨ä½¿ç”¨ä¸Šå…¨å…¼å®¹UnionFSï¼Œè€Œä¸”æ¯”ä¹‹å‰çš„UnionFSåœ¨ç¨³å®šæ€§å’Œæ€§èƒ½ä¸Šéƒ½è¦å¥½å¾ˆå¤šï¼Œåæ¥çš„UnionFS 2.xå¼€å§‹æŠ„AUFSä¸­çš„åŠŸèƒ½ã€‚ä½†æ˜¯ä»–å±…ç„¶æ²¡æœ‰è¿›åˆ°Linuxä¸»å¹²é‡Œï¼Œå°±æ˜¯å› ä¸ºLinusä¸è®©ï¼ŒåŸºæœ¬ä¸Šæ˜¯å› ä¸ºä»£ç é‡æ¯”è¾ƒå¤šï¼Œè€Œä¸”å†™å¾—çƒ‚ï¼ˆç›¸å¯¹äºåªæœ‰3000è¡Œçš„union mountå’Œ10000è¡Œçš„UnionFSï¼Œä»¥åŠå…¶å®ƒå¹³å‡ä¸‹æ¥åªæœ‰6000è¡Œä»£ç å·¦å³çš„VFSï¼ŒAUFSå±…ç„¶æœ‰30000è¡Œä»£ç ï¼‰ï¼Œæ‰€ä»¥ï¼Œå²¡å³¶ä¸æ–­åœ°æ”¹è¿›ä»£ç è´¨é‡ï¼Œä¸æ–­åœ°æäº¤ï¼Œä¸æ–­åœ°è¢«Linusæ‹’æ‰ï¼Œæ‰€ä»¥ï¼Œåˆ°ä»Šå¤©AUFSéƒ½è¿˜è¿›ä¸äº†Linuxä¸»å¹²ï¼ˆä»Šå¤©ä½ å¯ä»¥çœ‹åˆ°AUFSçš„ä»£ç å…¶å®è¿˜å¥½äº†ï¼Œæ¯”èµ·OpenSSLå¥½Nå€ï¼Œè¦ä¹ˆå°±æ˜¯Linuså¯¹ä»£ç çš„è´¨é‡è¦æ±‚éå¸¸é«˜ï¼Œè¦ä¹ˆå°±æ˜¯Linuså°±æ˜¯ä¸å–œæ¬¢AUFSï¼‰ã€‚</p><p>ä¸è¿‡ï¼Œå¥½åœ¨æœ‰å¾ˆå¤šå‘è¡Œç‰ˆéƒ½ç”¨äº†AUFSï¼Œæ¯”å¦‚ï¼šUbuntu 10.04ï¼ŒDebian6.0, Gentoo Live CDæ”¯æŒAUFSï¼Œæ‰€ä»¥ï¼Œä¹ŸOKäº†ã€‚</p><p>å¥½äº†ï¼Œæ‰¯å®Œè¿™äº›é—²è¯ï¼Œæˆ‘ä»¬è¿˜æ˜¯çœ‹ä¸€ä¸ªç¤ºä¾‹å§ï¼ˆç¯å¢ƒï¼šUbuntu 14.04ï¼‰</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬å»ºä¸Šä¸¤ä¸ªç›®å½•ï¼ˆæ°´æœå’Œè”¬èœï¼‰ï¼Œå¹¶åœ¨è¿™ä¸¤ä¸ªç›®å½•ä¸­æ”¾ä¸Šä¸€äº›æ–‡ä»¶ï¼Œæ°´æœä¸­æœ‰è‹¹æœå’Œè•ƒèŒ„ï¼Œè”¬èœæœ‰èƒ¡èåœå’Œè•ƒèŒ„ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ tree
</span></span><span class=line><span class=cl>.
</span></span><span class=line><span class=cl>â”œâ”€â”€ fruits
</span></span><span class=line><span class=cl>â”‚   â”œâ”€â”€ apple
</span></span><span class=line><span class=cl>â”‚   â””â”€â”€ tomato
</span></span><span class=line><span class=cl>â””â”€â”€ vegetables
</span></span><span class=line><span class=cl>    â”œâ”€â”€ carrots
</span></span><span class=line><span class=cl>    â””â”€â”€ tomato
</span></span></code></pre></td></tr></table></div></div><p>ç„¶åï¼Œæˆ‘ä»¬è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># åˆ›å»ºä¸€ä¸ªmountç›®å½•</span>
</span></span><span class=line><span class=cl>$ mkdir mnt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æŠŠæ°´æœç›®å½•å’Œè”¬èœç›®å½•union mountåˆ° ./mntç›®å½•ä¸­</span>
</span></span><span class=line><span class=cl>$ sudo mount -t aufs -o <span class=nv>dirs</span><span class=o>=</span>./fruits:./vegetables none ./mnt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#  æŸ¥çœ‹./mntç›®å½•</span>
</span></span><span class=line><span class=cl>$ tree ./mnt
</span></span><span class=line><span class=cl>./mnt
</span></span><span class=line><span class=cl>â”œâ”€â”€ apple
</span></span><span class=line><span class=cl>â”œâ”€â”€ carrots
</span></span><span class=line><span class=cl>â””â”€â”€ tomato
</span></span></code></pre></td></tr></table></div></div><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨./mntç›®å½•ä¸‹æœ‰ä¸‰ä¸ªæ–‡ä»¶ï¼Œè‹¹æœappleã€èƒ¡èåœcarrotså’Œè•ƒèŒ„tomatoã€‚æ°´æœå’Œè”¬èœçš„ç›®å½•è¢«unionåˆ°äº†./mntç›®å½•ä¸‹äº†ã€‚</p><p>æˆ‘ä»¬æ¥ä¿®æ”¹ä¸€ä¸‹å…¶ä¸­çš„æ–‡ä»¶å†…å®¹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nb>echo</span> mnt &gt; ./mnt/apple
</span></span><span class=line><span class=cl>$ cat ./mnt/apple
</span></span><span class=line><span class=cl>mnt
</span></span><span class=line><span class=cl>$ cat ./fruits/apple
</span></span><span class=line><span class=cl>mnt
</span></span></code></pre></td></tr></table></div></div><p>ä¸Šé¢çš„ç¤ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°./mnt/appleçš„å†…å®¹æ”¹äº†ï¼Œ./fruits/appleçš„å†…å®¹ä¹Ÿæ”¹äº†ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nb>echo</span> mnt_carrots &gt; ./mnt/carrots
</span></span><span class=line><span class=cl>$ cat ./vegetables/carrots 
</span></span><span class=line><span class=cl>$ cat ./fruits/carrots
</span></span><span class=line><span class=cl>mnt_carrots
</span></span></code></pre></td></tr></table></div></div><p>ä¸Šé¢çš„ç¤ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬ä¿®æ”¹äº†./mnt/carrotsçš„æ–‡ä»¶å†…å®¹ï¼Œ./vegetables/carrotså¹¶æ²¡æœ‰å˜åŒ–ï¼Œåè€Œæ˜¯./fruits/carrotsçš„ç›®å½•ä¸­å‡ºç°äº†carrotsæ–‡ä»¶ï¼Œå…¶å†…å®¹æ˜¯æˆ‘ä»¬åœ¨./mnt/carrotsé‡Œçš„å†…å®¹ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬åœ¨mount aufså‘½ä»¤ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰æŒ‡å®ƒvegetableså’Œfruitsçš„ç›®å½•æƒé™ï¼Œé»˜è®¤ä¸Šæ¥è¯´ï¼Œå‘½ä»¤è¡Œä¸Šç¬¬ä¸€ä¸ªï¼ˆæœ€å·¦è¾¹ï¼‰çš„ç›®å½•æ˜¯å¯è¯»å¯å†™çš„ï¼Œåé¢çš„å…¨éƒ½æ˜¯åªè¯»çš„ã€‚ï¼ˆä¸€èˆ¬æ¥è¯´ï¼Œæœ€å‰é¢çš„ç›®å½•åº”è¯¥æ˜¯å¯å†™çš„ï¼Œè€Œåé¢çš„éƒ½åº”è¯¥æ˜¯åªè¯»çš„ï¼‰</p><p>æ‰€ä»¥ï¼Œå¦‚æœæˆ‘ä»¬åƒä¸‹é¢è¿™æ ·æŒ‡å®šæƒé™æ¥mount aufsï¼Œä½ å°±ä¼šå‘ç°æœ‰ä¸ä¸€æ ·çš„æ•ˆæœï¼ˆè®°å¾—å…ˆæŠŠä¸Šé¢./fruits/carrotsçš„æ–‡ä»¶åˆ é™¤äº†ï¼‰ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ sudo mount -t aufs -o <span class=nv>dirs</span><span class=o>=</span>./fruits<span class=o>=</span>rw:./vegetables<span class=o>=</span>rw none ./mnt
</span></span><span class=line><span class=cl>$ <span class=nb>echo</span> <span class=s2>&#34;mnt_carrots&#34;</span> &gt; ./mnt/carrots 
</span></span><span class=line><span class=cl>$ cat ./vegetables/carrots
</span></span><span class=line><span class=cl>mnt_carrots
</span></span><span class=line><span class=cl>$ cat ./fruits/carrots
</span></span><span class=line><span class=cl>cat: ./fruits/carrots: No such file or directory
</span></span></code></pre></td></tr></table></div></div><p>ç°åœ¨ï¼Œåœ¨è¿™æƒ…å†µä¸‹ï¼Œå¦‚æœæˆ‘ä»¬è¦ä¿®æ”¹./mnt/tomatoè¿™ä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆç©¶ç«Ÿæ˜¯å“ªä¸ªæ–‡ä»¶ä¼šè¢«æ”¹å†™ï¼Ÿ</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nb>echo</span> <span class=s2>&#34;mnt_tomato&#34;</span> &gt; ./mnt/tomato 
</span></span><span class=line><span class=cl>$ cat ./fruits/tomato
</span></span><span class=line><span class=cl>mnt_tomato
</span></span><span class=line><span class=cl>$ cat ./vegetables/tomato
</span></span><span class=line><span class=cl>I am a vegetable
</span></span></code></pre></td></tr></table></div></div><p>å¯è§ï¼Œå¦‚æœæœ‰é‡å¤çš„æ–‡ä»¶åï¼Œåœ¨mountå‘½ä»¤è¡Œä¸Šï¼Œè¶Šå¾€å‰çš„å°±ä¼˜å…ˆçº§è¶Šé«˜ã€‚</p><p>ä½ å¯ä»¥ç”¨è¿™ä¸ªä¾‹å­åšä¸€äº›å„ç§å„æ ·çš„è¯•éªŒï¼Œæˆ‘è¿™é‡Œä¸»è¦æ˜¯ç»™å¤§å®¶ä¸€ä¸ªæ„Ÿæ€§è®¤è¯†ï¼Œå°±ä¸å±•å¼€è¯•éªŒä¸‹å»äº†ã€‚</p><p>é‚£ä¹ˆï¼Œè¿™ç§UnionFSæœ‰ä»€ä¹ˆç”¨ï¼Ÿ</p><p>å†å²ä¸Šï¼Œæœ‰ä¸€ä¸ªå«Knoppixçš„Linuxå‘è¡Œç‰ˆï¼Œå…¶ä¸»è¦ç”¨äºLinuxæ¼”ç¤ºã€å…‰ç›˜æ•™å­¦ã€ç³»ç»Ÿæ€¥æ•‘ï¼Œä»¥åŠå•†ä¸šäº§å“çš„æ¼”ç¤ºï¼Œä¸éœ€è¦ç¡¬ç›˜å®‰è£…ï¼Œç›´æ¥æŠŠCD/DVDä¸Šçš„imageè¿è¡Œåœ¨ä¸€ä¸ªå¯å†™çš„å­˜å‚¨è®¾å¤‡ä¸Šï¼ˆæ¯”å¦‚ä¸€ä¸ªUç›˜ä¸Šï¼‰ï¼Œå…¶å®ï¼Œä¹Ÿå°±æ˜¯æŠŠCD/DVDè¿™ä¸ªæ–‡ä»¶ç³»ç»Ÿå’ŒUSBè¿™ä¸ªå¯å†™çš„ç³»ç»Ÿç»™è”åˆmountèµ·æ¥ï¼Œè¿™æ ·ä½ å¯¹CD/DVDä¸Šçš„imageåšçš„ä»»ä½•æ”¹åŠ¨éƒ½ä¼šåœ¨è¢«åº”ç”¨åœ¨Uç›˜ä¸Šï¼Œäºæ˜¯ä¹ï¼Œä½ å¯ä»¥å¯¹CD/DVDä¸Šçš„å†…å®¹è¿›è¡Œä»»æ„çš„ä¿®æ”¹ï¼Œå› ä¸ºæ”¹åŠ¨éƒ½åœ¨Uç›˜ä¸Šï¼Œæ‰€ä»¥ä½ æ”¹ä¸ååŸæ¥çš„ä¸œè¥¿ã€‚</p><p>æˆ‘ä»¬å¯ä»¥å†å‘æŒ¥ä¸€ä¸‹æƒ³åƒåŠ›ï¼Œä½ ä¹Ÿå¯ä»¥æŠŠä¸€ä¸ªç›®å½•ï¼Œæ¯”å¦‚ä½ çš„æºä»£ç ï¼Œä½œä¸ºä¸€ä¸ªåªè¯»çš„templateï¼Œå’Œå¦ä¸€ä¸ªä½ çš„working directoryç»™unionåœ¨ä¸€èµ·ï¼Œç„¶åä½ å°±å¯ä»¥åšå„ç§ä¿®æ”¹è€Œä¸ç”¨å®³æ€•ä¼šæŠŠæºä»£ç æ”¹åäº†ã€‚æœ‰ç‚¹åƒä¸€ä¸ªad hoc snapshotã€‚</p><p>DockeræŠŠUnionFSçš„æƒ³åƒåŠ›å‘æŒ¥åˆ°äº†å®¹å™¨çš„é•œåƒã€‚ä½ æ˜¯å¦è¿˜è®°å¾—æˆ‘åœ¨ä»‹ç»Linux Namespaceä¸Šç¯‡ä¸­ç”¨mount namespaceå’Œchrootå±±å¯¨äº†ä¸€é•œåƒã€‚ç°åœ¨å½“ä½ çœ‹è¿‡äº†è¿™ä¸ªUnionFSçš„æŠ€æœ¯åï¼Œä½ æ˜¯ä¸æ˜¯å°±æ˜ç™½äº†ï¼Œä½ å®Œå…¨å¯ä»¥ç”¨UnionFSè¿™æ ·çš„æŠ€æœ¯åšå‡ºåˆ†å±‚çš„é•œåƒæ¥ã€‚</p><p>ä¸‹å›¾æ¥è‡ªDockerçš„å®˜æ–¹æ–‡æ¡£Layerï¼Œå…¶å¾ˆå¥½çš„å±•ç¤ºäº†Dockerç”¨UnionFSæ­å»ºçš„åˆ†å±‚é•œåƒã€‚</p><p><figure><a class=lightgallery href=/post/2418/images/2504610050.png data-thumbnail=/post/2418/images/2504610050.png data-sub-html="<h2>38252-3yzl8jcxokj.png</h2><p>2504610050</p>"><img class=lazyload src=/svg/loading.min.svg data-src=/post/2418/images/2504610050.png data-srcset="/post/2418/images/2504610050.png, /post/2418/images/2504610050.png 1.5x, /post/2418/images/2504610050.png 2x" data-sizes=auto alt=38252-3yzl8jcxokj.png title=2504610050 width=800 height=600></a><figcaption class=image-caption>38252-3yzl8jcxokj.png</figcaption></figure></p><p>å…³äºdockerçš„åˆ†å±‚é•œåƒï¼Œé™¤äº†aufsï¼Œdockerè¿˜æ”¯æŒbtrfs, devicemapperå’Œvfsï¼Œä½ å¯ä»¥ä½¿ç”¨ -s æˆ– â€“storage-driver= é€‰é¡¹æ¥æŒ‡å®šç›¸å…³çš„é•œåƒå­˜å‚¨ã€‚åœ¨Ubuntu 14.04ä¸‹ï¼Œdockeré»˜è®¤Ubuntuçš„ aufsï¼ˆåœ¨CentOS7ä¸‹ï¼Œç”¨çš„æ˜¯devicemapperï¼Œå…³äºdevicemapperï¼Œæˆ‘ä¼šä»¥ä»¥åçš„æ–‡ç« ä¸­è®²è§£ï¼‰ä½ å¯ä»¥åœ¨ä¸‹é¢çš„ç›®å½•ä¸­æŸ¥çœ‹ç›¸å…³çš„æ¯ä¸ªå±‚çš„é•œåƒï¼š
<code>/var/lib/docker/aufs/diff/&lt;id></code></p><p>åœ¨dockeræ‰§è¡Œèµ·æ¥åï¼ˆæ¯”å¦‚ï¼šdocker run -it ubuntu /bin/bash ï¼‰ï¼Œä½ å¯ä»¥ä»/sys/fs/aufs/si_[id]ç›®å½•ä¸‹æŸ¥çœ‹aufsçš„mountçš„æƒ…å†µï¼Œä¸‹é¢æ˜¯ä¸ªç¤ºä¾‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1>#ls /sys/fs/aufs/si_b71b209f85ff8e75/</span>
</span></span><span class=line><span class=cl>br0      br2      br4      br6      brid1    brid3    brid5    xi_path
</span></span><span class=line><span class=cl>br1      br3      br5      brid0    brid2    brid4    brid6 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># cat /sys/fs/aufs/si_b71b209f85ff8e75/*</span>
</span></span><span class=line><span class=cl>/var/lib/docker/aufs/diff/87315f1367e5703f599168d1e17528a0500bd2e2df7d2fe2aaf9595f3697dbd7<span class=o>=</span>rw
</span></span><span class=line><span class=cl>/var/lib/docker/aufs/diff/87315f1367e5703f599168d1e17528a0500bd2e2df7d2fe2aaf9595f3697dbd7-init<span class=o>=</span>ro+wh
</span></span><span class=line><span class=cl>/var/lib/docker/aufs/diff/d0955f21bf24f5bfffd32d2d0bb669d0564701c271bc3dfc64cfc5adfdec2d07<span class=o>=</span>ro+wh
</span></span><span class=line><span class=cl>/var/lib/docker/aufs/diff/9fec74352904baf5ab5237caa39a84b0af5c593dc7cc08839e2ba65193024507<span class=o>=</span>ro+wh
</span></span><span class=line><span class=cl>/var/lib/docker/aufs/diff/a1a958a248181c9aa6413848cd67646e5afb9797f1a3da5995c7a636f050f537<span class=o>=</span>ro+wh
</span></span><span class=line><span class=cl>/var/lib/docker/aufs/diff/f3c84ac3a0533f691c9fea4cc2ceaaf43baec22bf8d6a479e069f6d814be9b86<span class=o>=</span>ro+wh
</span></span><span class=line><span class=cl>/var/lib/docker/aufs/diff/511136ea3c5a64f264b78b5433614aec563103b4d4702f3ba7d4d2698e22c158<span class=o>=</span>ro+wh
</span></span><span class=line><span class=cl><span class=m>64</span>
</span></span><span class=line><span class=cl><span class=m>65</span>
</span></span><span class=line><span class=cl><span class=m>66</span>
</span></span><span class=line><span class=cl><span class=m>67</span>
</span></span><span class=line><span class=cl><span class=m>68</span>
</span></span><span class=line><span class=cl><span class=m>69</span>
</span></span><span class=line><span class=cl><span class=m>70</span>
</span></span><span class=line><span class=cl>/run/shm/aufs.xino
</span></span></code></pre></td></tr></table></div></div><p>ä½ ä¼šçœ‹åˆ°åªæœ‰æœ€é¡¶ä¸Šçš„å±‚ï¼ˆbranchï¼‰æ˜¯rwæƒé™ï¼Œå…¶å®ƒçš„éƒ½æ˜¯ro+whæƒé™åªè¯»çš„ã€‚</p><p>å…³äºdockerçš„aufsçš„é…ç½®ï¼Œä½ å¯ä»¥åœ¨/var/lib/docker/repositories-aufsè¿™ä¸ªæ–‡ä»¶ä¸­çœ‹åˆ°ã€‚</p><h2 id=aufsçš„ä¸€äº›ç‰¹æ€§>AUFSçš„ä¸€äº›ç‰¹æ€§</h2><p>AUFSæœ‰æ‰€æœ‰Union FSçš„ç‰¹æ€§ï¼ŒæŠŠå¤šä¸ªç›®å½•ï¼Œåˆå¹¶æˆåŒä¸€ä¸ªç›®å½•ï¼Œå¹¶å¯ä»¥ä¸ºæ¯ä¸ªéœ€è¦åˆå¹¶çš„ç›®å½•æŒ‡å®šç›¸åº”çš„æƒé™ï¼Œå®æ—¶çš„æ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹å·²ç»è¢«mountå¥½çš„ç›®å½•ã€‚è€Œä¸”ï¼Œä»–è¿˜èƒ½åœ¨å¤šä¸ªå¯å†™çš„branch/diré—´è¿›è¡Œè´Ÿè½½å‡è¡¡ã€‚</p><p>ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬å·²ç»çœ‹åˆ°AUFSçš„mountçš„ç¤ºä¾‹äº†ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€çœ‹è¢«unionçš„ç›®å½•ï¼ˆåˆ†æ”¯ï¼‰çš„ç›¸å…³æƒé™ï¼š</p><p>rwè¡¨ç¤ºå¯å†™å¯è¯»read-writeã€‚
roè¡¨ç¤ºread-onlyï¼Œå¦‚æœä½ ä¸æŒ‡æƒé™ï¼Œé‚£ä¹ˆé™¤äº†ç¬¬ä¸€ä¸ªå¤–roæ˜¯é»˜è®¤å€¼ï¼Œå¯¹äºroåˆ†æ”¯ï¼Œå…¶æ°¸è¿œä¸ä¼šæ”¶åˆ°å†™æ“ä½œï¼Œä¹Ÿä¸ä¼šæ”¶åˆ°æŸ¥æ‰¾whiteoutçš„æ“ä½œã€‚
rrè¡¨ç¤ºreal-read-onlyï¼Œä¸read-onlyä¸åŒçš„æ˜¯ï¼Œrræ ‡è®°çš„æ˜¯å¤©ç”Ÿå°±æ˜¯åªè¯»çš„åˆ†æ”¯ï¼Œè¿™æ ·ï¼ŒAUFSå¯ä»¥æé«˜æ€§èƒ½ï¼Œæ¯”å¦‚ä¸å†è®¾ç½®inotifyæ¥æ£€æŸ¥æ–‡ä»¶å˜åŠ¨é€šçŸ¥ã€‚
æƒé™ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†ä¸€ä¸ªæœ¯è¯­ï¼šwhiteoutï¼Œä¸‹é¢æˆ‘æ¥è§£é‡Šä¸€ä¸‹è¿™ä¸ªæœ¯è¯­ã€‚</p><p>ä¸€èˆ¬æ¥è¯´roçš„åˆ†æ”¯éƒ½ä¼šæœ‰whçš„å±æ€§ï¼Œæ¯”å¦‚ â€œ[dir]=ro+whâ€ã€‚æ‰€è°“whiteoutçš„æ„æ€ï¼Œå¦‚æœåœ¨unionä¸­åˆ é™¤çš„æŸä¸ªæ–‡ä»¶ï¼Œå®é™…ä¸Šæ˜¯ä½äºä¸€ä¸ªreadonlyçš„åˆ†æ”¯ï¼ˆç›®å½•ï¼‰ä¸Šï¼Œé‚£ä¹ˆï¼Œåœ¨mountçš„unionè¿™ä¸ªç›®å½•ä¸­ä½ å°†çœ‹ä¸åˆ°è¿™ä¸ªæ–‡ä»¶ï¼Œä½†æ˜¯read-onlyè¿™ä¸ªå±‚ä¸Šæˆ‘ä»¬æ— æ³•åšä»»ä½•çš„ä¿®æ”¹ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å°±éœ€è¦å¯¹è¿™ä¸ªreadonlyç›®å½•é‡Œçš„æ–‡ä»¶ä½œwhiteoutã€‚AUFSçš„whiteoutçš„å®ç°æ˜¯é€šè¿‡åœ¨ä¸Šå±‚çš„å¯å†™çš„ç›®å½•ä¸‹å»ºç«‹å¯¹åº”çš„whiteoutéšè—æ–‡ä»¶æ¥å®ç°çš„ã€‚</p><p>çœ‹ä¸ªä¾‹å­ï¼š</p><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸‰ä¸ªç›®å½•å’Œæ–‡ä»¶å¦‚ä¸‹æ‰€ç¤ºï¼ˆtestæ˜¯ä¸ªç©ºç›®å½•ï¼‰ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># tree</span>
</span></span><span class=line><span class=cl>.
</span></span><span class=line><span class=cl>â”œâ”€â”€ fruits
</span></span><span class=line><span class=cl>â”‚   â”œâ”€â”€ apple
</span></span><span class=line><span class=cl>â”‚   â””â”€â”€ tomato
</span></span><span class=line><span class=cl>â”œâ”€â”€ <span class=nb>test</span>
</span></span><span class=line><span class=cl>â””â”€â”€ vegetables
</span></span><span class=line><span class=cl>    â”œâ”€â”€ carrots
</span></span><span class=line><span class=cl>    â””â”€â”€ tomato
</span></span></code></pre></td></tr></table></div></div><p>æˆ‘ä»¬å¦‚ä¸‹mountï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># mkdir mnt</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># mount -t aufs -o dirs=./test=rw:./fruits=ro:./vegetables=ro none ./mnt</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># # ls ./mnt/</span>
</span></span><span class=line><span class=cl>apple  carrots  tomato 
</span></span></code></pre></td></tr></table></div></div><p>ç°åœ¨æˆ‘ä»¬åœ¨æƒé™ä¸ºrwçš„testç›®å½•ä¸‹å»ºä¸ªwhiteoutçš„éšè—æ–‡ä»¶.wh.appleï¼Œä½ å°±ä¼šå‘ç°./mnt/appleè¿™ä¸ªæ–‡ä»¶å°±æ¶ˆå¤±äº†:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl> <span class=c1># touch ./test/.wh.apple</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ls ./mnt</span>
</span></span><span class=line><span class=cl>carrots  tomato
</span></span></code></pre></td></tr></table></div></div><p>ä¸Šé¢è¿™ä¸ªæ“ä½œå’Œ rm ./mnt/appleæ˜¯ä¸€æ ·çš„ã€‚</p><h2 id=ç›¸å…³æœ¯è¯­>ç›¸å…³æœ¯è¯­</h2><p>Branch â€“ å°±æ˜¯å„ä¸ªè¦è¢«unionèµ·æ¥çš„ç›®å½•ï¼ˆå°±æ˜¯æˆ‘åœ¨ä¸Šé¢ä½¿ç”¨çš„dirsçš„å‘½ä»¤è¡Œå‚æ•°ï¼‰</p><p>ÂšBranchæ ¹æ®è¢«unionçš„é¡ºåºå½¢æˆä¸€ä¸ªstackï¼Œä¸€èˆ¬æ¥è¯´æœ€ä¸Šé¢çš„æ˜¯å¯å†™çš„ï¼Œä¸‹é¢çš„éƒ½æ˜¯åªè¯»çš„ã€‚
ÂšBranchçš„stackå¯ä»¥åœ¨è¢«mountåè¿›è¡Œä¿®æ”¹ï¼Œæ¯”å¦‚ï¼šä¿®æ”¹é¡ºåºï¼ŒåŠ å…¥æ–°çš„branchï¼Œæˆ–æ˜¯åˆ é™¤å…¶ä¸­çš„branchï¼Œæˆ–æ˜¯ç›´æ¥ä¿®æ”¹branchçš„æƒé™
ÂšWhiteout å’Œ Opaque</p><p>Âšå¦‚æœUnionFSä¸­çš„æŸä¸ªç›®å½•è¢«åˆ é™¤äº†ï¼Œé‚£ä¹ˆå°±åº”è¯¥ä¸å¯è§äº†ï¼Œå°±ç®—æ˜¯åœ¨åº•å±‚çš„branchä¸­è¿˜æœ‰è¿™ä¸ªç›®å½•ï¼Œé‚£ä¹Ÿåº”è¯¥ä¸å¯è§äº†ã€‚
ÂšWhiteoutå°±æ˜¯æŸä¸ªä¸Šå±‚ç›®å½•è¦†ç›–äº†ä¸‹å±‚çš„ç›¸åŒåå­—çš„ç›®å½•ã€‚ç”¨äºéšè—ä½å±‚åˆ†æ”¯çš„æ–‡ä»¶ï¼Œä¹Ÿç”¨äºé˜»æ­¢readdirè¿›å…¥ä½å±‚åˆ†æ”¯ã€‚
ÂšOpaqueçš„æ„æ€å°±æ˜¯ä¸å…è®¸ä»»ä½•ä¸‹å±‚çš„æŸä¸ªç›®å½•æ˜¾ç¤ºå‡ºæ¥ã€‚
Âšåœ¨éšè—ä½å±‚æ¡£çš„æƒ…å†µä¸‹ï¼Œwhiteoutçš„åå­—æ˜¯â€™.wh.<filename>â€™ã€‚
Âšåœ¨é˜»æ­¢readdirçš„æƒ…å†µä¸‹ï¼Œåå­—æ˜¯â€™.wh..wh..opqâ€™æˆ–è€… â€™.wh.__dir_opaqueâ€™ã€‚</p><h2 id=ç›¸å…³é—®é¢˜>ç›¸å…³é—®é¢˜</h2><p>çœ‹åˆ°ä¸Šé¢è¿™äº›ï¼Œä½ ä¸€å®šä¼šæœ‰å‡ ä¸ªé—®é¢˜ï¼š</p><h3 id=å…¶ä¸€ä½ å¯èƒ½ä¼šé—®è¦æœ‰æ–‡ä»¶åœ¨åŸæ¥çš„åœ°æ–¹è¢«ä¿®æ”¹äº†ä¼šæ€ä¹ˆæ ·mountçš„ç›®å½•ä¼šä¸€èµ·æ”¹å˜å—ç­”æ¡ˆæ˜¯ä¼šçš„ä¹Ÿå¯ä»¥æ˜¯ä¸ä¼šçš„å› ä¸ºä½ å¯ä»¥æŒ‡å®šä¸€ä¸ªå«udbaçš„å‚æ•°å…¨ç§°users-direct-branch-accessè¿™ä¸ªå‚æ•°æœ‰ä¸‰ä¸ªå–å€¼>å…¶ä¸€ã€ä½ å¯èƒ½ä¼šé—®ï¼Œè¦æœ‰æ–‡ä»¶åœ¨åŸæ¥çš„åœ°æ–¹è¢«ä¿®æ”¹äº†ä¼šæ€ä¹ˆæ ·ï¼Ÿmountçš„ç›®å½•ä¼šä¸€èµ·æ”¹å˜å—ï¼Ÿç­”æ¡ˆæ˜¯ä¼šçš„ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸ä¼šçš„ã€‚å› ä¸ºä½ å¯ä»¥æŒ‡å®šä¸€ä¸ªå«udbaçš„å‚æ•°ï¼ˆå…¨ç§°ï¼šUserâ€™s Direct Branch Accessï¼‰ï¼Œè¿™ä¸ªå‚æ•°æœ‰ä¸‰ä¸ªå–å€¼ï¼š</h3><p>udba=none â€“ è®¾ç½®ä¸Šè¿™ä¸ªå‚æ•°åï¼ŒAUFSä¼šè¿è½¬çš„æ›´å¿«ï¼Œå› ä¸ºé‚£äº›ä¸åœ¨mountç›®å½•é‡Œå‘ç”Ÿçš„ä¿®æ”¹ï¼Œaufsä¸ä¼šåŒæ­¥è¿‡æ¥äº†ï¼Œæ‰€ä»¥ä¼šæœ‰æ•°æ®å‡ºé”™çš„é—®é¢˜ã€‚
udba=reval â€“ è®¾ç½®ä¸Šè¿™ä¸ªå‚æ•°åï¼ŒAUFSä¼šå»æŸ¥æ–‡ä»¶æœ‰æ²¡æœ‰è¢«æ›´æ–°ï¼Œå¦‚æœæœ‰çš„è¯ï¼Œå°±ä¼šæŠŠä¿®æ”¹æ‹‰åˆ°mountç›®å½•å†…ã€‚
udba=notify â€“ è¿™ä¸ªå‚æ•°ä¼šè®©AUFSä¸ºæ‰€æœ‰çš„branchæ³¨å†Œinotifyï¼Œè¿™æ ·å¯ä»¥è®©AUFSåœ¨æ›´æ–°æ–‡ä»¶ä¿®æ”¹çš„æ€§èƒ½æ›´é«˜ä¸€äº›ã€‚</p><h3 id=å…¶äºŒå¦‚æœæœ‰å¤šä¸ªrwçš„branchç›®å½•è¢«unionèµ·æ¥äº†é‚£ä¹ˆå½“æˆ‘åˆ›å»ºæ–‡ä»¶çš„æ—¶å€™aufsä¼šåˆ›å»ºåœ¨å“ªé‡Œå‘¢-aufsæä¾›äº†ä¸€ä¸ªå«createçš„å‚æ•°å¯ä»¥ä¾›ä½ æ¥é…ç½®ç›¸å½“çš„åˆ›å»ºç­–ç•¥ä¸‹é¢æœ‰å‡ ä¸ªä¾‹å­>å…¶äºŒã€å¦‚æœæœ‰å¤šä¸ªrwçš„branchï¼ˆç›®å½•ï¼‰è¢«unionèµ·æ¥äº†ï¼Œé‚£ä¹ˆï¼Œå½“æˆ‘åˆ›å»ºæ–‡ä»¶çš„æ—¶å€™ï¼Œaufsä¼šåˆ›å»ºåœ¨å“ªé‡Œå‘¢ï¼Ÿ aufsæä¾›äº†ä¸€ä¸ªå«createçš„å‚æ•°å¯ä»¥ä¾›ä½ æ¥é…ç½®ç›¸å½“çš„åˆ›å»ºç­–ç•¥ï¼Œä¸‹é¢æœ‰å‡ ä¸ªä¾‹å­ã€‚</h3><p>create=rr | roundâˆ’robin è½®è¯¢ã€‚ä¸‹é¢çš„ç¤ºä¾‹å¯ä»¥çœ‹åˆ°ï¼Œæ–°åˆ›å»ºçš„æ–‡ä»¶è½®æµå†™åˆ°ä¸‰ä¸ªç›®å½•ä¸­</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>hchen$ sudo mount -t aufs  -o <span class=nv>dirs</span><span class=o>=</span>./1<span class=o>=</span>rw:./2<span class=o>=</span>rw:./3<span class=o>=</span>rw -o <span class=nv>create</span><span class=o>=</span>rr none ./mnt
</span></span><span class=line><span class=cl>hchen$ touch ./mnt/a ./mnt/b ./mnt/c
</span></span><span class=line><span class=cl>hchen$ tree
</span></span><span class=line><span class=cl>.
</span></span><span class=line><span class=cl>â”œâ”€â”€ <span class=m>1</span>
</span></span><span class=line><span class=cl>â”‚   â””â”€â”€ a
</span></span><span class=line><span class=cl>â”œâ”€â”€ <span class=m>2</span>
</span></span><span class=line><span class=cl>â”‚   â””â”€â”€ c
</span></span><span class=line><span class=cl>â””â”€â”€ <span class=m>3</span>
</span></span><span class=line><span class=cl>    â””â”€â”€ b
</span></span></code></pre></td></tr></table></div></div><p>create=mfs[:second] | mostâˆ’freeâˆ’space[:second] é€‰ä¸€ä¸ªå¯ç”¨ç©ºé—´æœ€å¥½çš„åˆ†æ”¯ã€‚å¯ä»¥æŒ‡å®šä¸€ä¸ªæ£€æŸ¥å¯ç”¨ç£ç›˜ç©ºé—´çš„æ—¶é—´ã€‚</p><p>create=mfsrr:low[:second] é€‰ä¸€ä¸ªç©ºé—´å¤§äºlowçš„branchï¼Œå¦‚æœç©ºé—´å°äºlowäº†ï¼Œé‚£ä¹ˆaufsä¼šä½¿ç”¨ round-robin æ–¹å¼ã€‚</p><p>æ›´å¤šçš„å…³äºAUFSçš„ç»†èŠ‚ä½¿ç”¨å‚æ•°ï¼Œå¤§å®¶å¯ä»¥ç›´æ¥åœ¨Ubuntu 14.04ä¸‹é€šè¿‡ man aufs æ¥çœ‹ä¸€ä¸‹å…¶ä¸­çš„å„ç§å‚æ•°å’Œå‘½ä»¤ã€‚</p><h2 id=aufsçš„æ€§èƒ½>AUFSçš„æ€§èƒ½</h2><p>AUFSçš„æ€§èƒ½æ…¢å—ï¼Ÿä¹Ÿæ…¢ä¹Ÿä¸æ…¢ã€‚å› ä¸ºAUFSä¼šæŠŠæ‰€æœ‰çš„åˆ†æ”¯mountèµ·æ¥ï¼Œæ‰€ä»¥ï¼Œåœ¨æŸ¥æ‰¾æ–‡ä»¶ä¸Šæ˜¯æ¯”è¾ƒæ…¢äº†ã€‚å› ä¸ºå®ƒè¦éå†æ‰€æœ‰çš„branchã€‚æ˜¯ä¸ªO(n)çš„ç®—æ³•ï¼ˆå¾ˆæ˜æ˜¾ï¼Œè¿™ä¸ªç®—æ³•æœ‰å¾ˆå¤§çš„æ”¹è¿›ç©ºé—´çš„ï¼‰æ‰€ä»¥ï¼Œbranchè¶Šå¤šï¼ŒæŸ¥æ‰¾æ–‡ä»¶çš„æ€§èƒ½ä¹Ÿå°±è¶Šæ…¢ã€‚ä½†æ˜¯ï¼Œä¸€æ—¦AUFSæ‰¾åˆ°äº†è¿™ä¸ªæ–‡ä»¶çš„inodeï¼Œé‚£åä»¥åçš„è¯»å†™å’Œæ“ä½œåŸæ–‡ä»¶åŸºæœ¬ä¸Šæ˜¯ä¸€æ ·çš„ã€‚</p><p>æ‰€ä»¥ï¼Œå¦‚æœä½ çš„ç¨‹åºè·‘åœ¨åœ¨AUFSä¸‹ï¼Œopenå’Œstatæ“ä½œä¼šæœ‰æ˜æ˜¾çš„æ€§èƒ½ä¸‹é™ï¼Œbranchè¶Šå¤šï¼Œæ€§èƒ½è¶Šå·®ï¼Œä½†æ˜¯åœ¨write/readæ“ä½œä¸Šï¼Œæ€§èƒ½æ²¡æœ‰ä»€ä¹ˆå˜åŒ–ã€‚</p><p>IBMçš„ç ”ç©¶ä¸­å¿ƒå¯¹Dockerçš„æ€§èƒ½ç»™äº†ä¸€ä»½éå¸¸ä¸é”™çš„æ€§èƒ½æŠ¥å‘Šï¼ˆPDFï¼‰ã€ŠAn Updated Performance Comparison of Virtual Machinesand Linux Containersã€‹</p><p>æˆ‘æˆªäº†ä¸¤å¼ å›¾å‡ºæ¥ï¼Œç¬¬ä¸€å¼ æ˜¯é¡ºåºè¯»å†™ï¼Œç¬¬äºŒå¼ æ˜¯éšæœºè¯»å†™ã€‚åŸºæœ¬æ²¡æœ‰ä»€ä¹ˆæ€§èƒ½æŸå¤±çš„é—®é¢˜ã€‚è€ŒKVMåœ¨éšæœºè¯»å†™çš„æƒ…å†µä¹Ÿå°±æœ‰ç‚¹æ…¢äº†ï¼ˆä½†æ˜¯ï¼Œå¦‚æœç¡¬ç›˜æ˜¯SSDçš„å‘¢ï¼Ÿï¼‰</p><p><figure><a class=lightgallery href=/post/2418/images/1322734855.png data-thumbnail=/post/2418/images/1322734855.png data-sub-html="<h2>20660-44jefr87f1m.png</h2><p>1322734855</p>"><img class=lazyload src=/svg/loading.min.svg data-src=/post/2418/images/1322734855.png data-srcset="/post/2418/images/1322734855.png, /post/2418/images/1322734855.png 1.5x, /post/2418/images/1322734855.png 2x" data-sizes=auto alt=20660-44jefr87f1m.png title=1322734855 width=368 height=256></a><figcaption class=image-caption>20660-44jefr87f1m.png</figcaption></figure></p><p><figure><a class=lightgallery href=/post/2418/images/1223410990.png data-thumbnail=/post/2418/images/1223410990.png data-sub-html="<h2>18324-26iv6mrrvw8.png</h2><p>1223410990</p>"><img class=lazyload src=/svg/loading.min.svg data-src=/post/2418/images/1223410990.png data-srcset="/post/2418/images/1223410990.png, /post/2418/images/1223410990.png 1.5x, /post/2418/images/1223410990.png 2x" data-sizes=auto alt=18324-26iv6mrrvw8.png title=1223410990 width=363 height=236></a><figcaption class=image-caption>18324-26iv6mrrvw8.png</figcaption></figure></p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="2021-05-31 15:30:33">æ›´æ–°äº 2021-05-31 15:30&nbsp;</span></div><div class=post-info-license><span>æœ¬ç«™ä½¿ç”¨ã€Œç½²å 4.0 å›½é™…ã€åˆ›ä½œå…±äº«åè®®ï¼Œå¯è‡ªç”±è½¬è½½ã€å¼•ç”¨ï¼Œä½†éœ€ç½²åä½œè€…ä¸”æ³¨æ˜æ–‡ç« å‡ºå¤„</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw me-1" aria-hidden=true></i><a href=/tags/docker/ class=post-tag>docker</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>è¿”å›</a></span>&nbsp;|&nbsp;<span><a href=/>ä¸»é¡µ</a></span></section></div><div class=post-nav><a href=/post/2415/ class=post-nav-item rel=prev title=jira_confluenceå…¨é‡è¿ç§»><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i>jira_confluenceå…¨é‡è¿ç§»</a>
<a href=/post/2430/ class=post-nav-item rel=next title=Diffie-Hellman(DH)å¯†é’¥äº¤æ¢ç®—æ³•>Diffie-Hellman(DH)å¯†é’¥äº¤æ¢ç®—æ³•<i class="fa-solid fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div class=post-reward><div class=comment>è¯·æˆ‘å–æ¯æ°´</div><input type=checkbox class=reward-input name=reward id=fi-reward hidden>
<label class=reward-button for=fi-reward>èµèµ</label><div class=reward-ways><div><img src=/images/wx.png alt="SoulChild å¾®ä¿¡å·">
<span data-animation>å¾®ä¿¡å·</span></div><div><img src=/images/wechatpay.png alt="SoulChild å¾®ä¿¡æ‰“èµ">
<span data-animation>å¾®ä¿¡æ‰“èµ</span></div></div></div><div id=comments><div id=giscus><script src=https://giscus.app/client.js data-repo=SoulChildTc/soulchild-blog data-repo-id=R_kgDOIwJKxg data-category=General data-category-id=DIC_kwDOIwJKxs4CTwRk data-mapping=title data-theme=preferred_color_scheme data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-lang=zh-CN data-loading=lazy crossorigin=anonymous async defer></script></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://giscus.app/ rel="external nofollow noopener noreferrer">giscus</a>.</noscript></div></article></main><footer class=footer><div class=footer-container><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?7b986d4ea8e2e50e9c04984b78170660",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><script src=/js/effect.js></script><style>body{position:relative;overflow-x:hidden}#canvas-effect{opacity:.7}</style><div class="footer-line copyright" itemscope itemtype=http://schema.org/CreativeWork><i class="fa-regular fa-copyright fa-fw" aria-hidden=true></i>
<span itemprop=copyrightYear>2017 - 2025</span><span class=author itemprop=copyrightHolder>
<a href=https://www.soulchild.cn target=_blank rel="external nofollow noopener noreferrer">SoulChild</a></span><span class="license footer-divider"><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div><div class="footer-line statistics"><span class=site-time title='ç½‘ç«™è¿è¡Œä¸­ ...'><i class="fa-solid fa-heartbeat fa-fw animate-icon" aria-hidden=true></i><span class="run-times ms-1">ç½‘ç«™è¿è¡Œä¸­ ...</span></span></div><div class="footer-line visitor"><span id=busuanzi_container_site_uv title=æ€»è®¿å®¢æ•°><i class="fa-regular fa-user fa-fw" aria-hidden=true></i>&nbsp;<span id=busuanzi_value_site_uv><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden=true></i></span></span><span id=busuanzi_container_site_pv class=footer-divider title=æ€»è®¿é—®é‡><i class="fa-regular fa-eye fa-fw" aria-hidden=true></i>&nbsp;<span id=busuanzi_value_site_pv><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden=true></i></span></span></div><div class="footer-line beian"><span class="icp footer-divider">ç‰¹åˆ«æ„Ÿè°¢
<a href=https://gohugo.io target=_blank rel="external nofollow noopener noreferrer" title="Hugo 0.109.0">Hugo</a> |
<a href=https://github.com/hugo-fixit/FixIt target=_blank rel=external title="FixIt v0.2.17-RC">FixIt</a> |
<a href=https://github.com target=_blank rel="noopener noreffer">GitHub</a> |
<a href=https://vercel.com target=_blank rel="noopener noreffer">Vercel</a></span></div></div></footer></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label=å›åˆ°é¡¶éƒ¨><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class=variant-numeric>0%</span></div><div class="fixed-button view-comments d-none" role=button aria-label=æŸ¥çœ‹è¯„è®º><i class="fa-solid fa-comment fa-fw" aria-hidden=true></i></div></div><div id=mask></div><div class=reading-progress-bar style=left:0;top:0;--bg-progress:#438a55;--bg-progress-dark:#438a55></div><noscript><div class=noscript-warning>FixIt ä¸»é¢˜åœ¨å¯ç”¨ JavaScript çš„æƒ…å†µä¸‹æ•ˆæœæœ€ä½³ã€‚</div></noscript></div><link rel=stylesheet href=/lib/lightgallery/css/lightgallery-bundle.min.css><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=stylesheet href=/lib/pace/themes/green/pace-theme-bounce.css><script src=/lib/autocomplete/autocomplete.min.js defer></script><script src=/lib/algoliasearch/algoliasearch-lite.umd.min.js defer></script><script src=/lib/lazysizes/lazysizes.min.js async defer></script><script src=/lib/lightgallery/lightgallery.min.js defer></script><script src=/lib/lightgallery/plugins/thumbnail/lg-thumbnail.min.js defer></script><script src=/lib/lightgallery/plugins/zoom/lg-zoom.min.js defer></script><script src=/lib/typeit/index.umd.js defer></script><script src=/lib/katex/katex.min.js defer></script><script src=/lib/katex/auto-render.min.js defer></script><script src=/lib/katex/copy-tex.min.js defer></script><script src=/lib/katex/mhchem.min.js defer></script><script src=/lib/pangu/pangu.min.js defer></script><script src=/lib/cell-watermark/watermark.min.js defer></script><script src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js async defer></script><script src=/lib/pace/pace.min.js async defer></script><script>window.config={autoBookmark:!0,code:{copyTitle:"å¤åˆ¶åˆ°å‰ªè´´æ¿",editLockTitle:"é”å®šå¯ç¼–è¾‘ä»£ç å—",editUnLockTitle:"è§£é”å¯ç¼–è¾‘ä»£ç å—",editable:!0,maxShownLines:50},comment:{enable:!0,expired:!1,giscus:{darkTheme:"dark",lightTheme:"light"}},data:{"typeit-header-subtitle-desktop":"/usr/bin/sleep infinity","typeit-header-subtitle-mobile":"/usr/bin/sleep infinity"},enablePWA:!0,lightgallery:!0,math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},pangu:{enable:!0,selector:"article"},search:{algoliaAppID:"CE9G7Q4H6N",algoliaIndex:"soulchild-blog",algoliaSearchKey:"0f69a431d92a03c2cf4143d8dbc6af0a",highlightTag:"em",maxResultLength:20,noResultsFound:"æ²¡æœ‰æ‰¾åˆ°ç»“æœ",snippetLength:50,type:"algolia"},siteTime:"2017-06-08T21:38:36+08:00",typeit:{cursorChar:"|",cursorSpeed:1e3,data:{"typeit-header-subtitle-desktop":["typeit-header-subtitle-desktop"],"typeit-header-subtitle-mobile":["typeit-header-subtitle-mobile"]},duration:-1,speed:100},watermark:{appendto:".wrapper\u003emain",colspacing:300,content:"SoulChildéšç¬”è®°",enable:!0,fontfamily:"inherit",fontsize:.85,height:300,opacity:.1,rotate:15,rowspacing:100,width:300}}</script><script src=/js/theme.min.js defer></script></body></html>